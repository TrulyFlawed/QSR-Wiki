<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/themes.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/styles.css">
    <script> // Automatically loads saved theme or uses system preference.
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
      // Load saved theme or use system preference
      const savedTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', savedTheme);
    </script>

    <!-- optional: allow pages to add custom CSS files; could be expanded for JS later if needed -->
    {% if page.custom_css %}
      {% for stylesheet in page.custom_css %}
      <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/{{ stylesheet }}.css">
      {% endfor %}
    {% endif %}
</head>
<body>
  {% include header.html %}

  <main>
    {{ content }}   <!-- page/post content is inserted here unchanged -->
  </main>

  {% include footer.html %}

  <!-- site-wide scripts -->
  <script src="script.js"></script>
  {{ page.extra_scripts }}
</body>
</html>